<div class='container'>
  <h1><%= t('.tours')%></h1>

  <table class="table table-striped">
    <thead class="thead-light">
      <tr>
        <th scope="col">#</th>
        <th scope="col"><%= Tour.human_attribute_name('name') %></th>
        <th scope="col"><%= RoadMap.model_name.human %></th>
        <th scope="col"><%= Tour.human_attribute_name('status') %></th>
        <th scope="col"><%= Tour.human_attribute_name('live_date') %></th>
      </tr>
    </thead>
    <tbody>
      <% @tours.each do |tour| %>
        <tr>
          <td></td>
          <td> <%= link_to tour.name, partners_tour_path(tour) %> </td>
          <td> <%= link_to tour.road_map.title, partners_road_map_path(tour.road_map) %> </td>
          <td> <%= Tour.human_attribute_name("status.#{tour.status}")%> </td>
          <td> <%= tour.live_date.strftime("%d/%m/%Y - %H:%M") %> </td>
          <td>
            <%= link_to [:partners, tour], data: { method: :delete, confirm: 'Você tem certeza?' } do %>
              <%= image_tag('icon_trash.svg')%>
            <% end %>
          </td>

          <% if  tour.status == "pending" %>
            <td>
              <%= link_to edit_partners_tour_path(tour) do %>
                <%= image_tag 'icon_edit.svg' %>
              <% end %>
            </td>

            <td> 
              <%= link_to t('.start_live'), 
                  processing_partners_tour_path(tour),
                  class: 'btn btn-success',
                  method: :post 
              %>
            </td>
          <% end %>

          <% if tour.status == "pending" || tour.status == "processing"  %>
            <td> 
              <%= link_to t('.close_live'), 
                  closed_partners_tour_path(tour),
                  class: 'btn btn-danger',
                  data: { confirm: 'Você tem certeza?' },
                  method: :post 
              %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="form-actions mt-5 float-end">
    <%= link_to t('buttons.back'), partners_dashboard_path, class:"btn btn-primary" %>
  </div>
</div>
